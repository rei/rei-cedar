@import '../../../../styles/settings/index.scss';

$selectable-surface-component: 'surface-selection';
$selectable-surface-modifiers: 'default';
$selectable-surface-background-colors: (
  'default': (
    'rest': $cdr-color-background-selectable-surface-default-rest,
    'hover': $cdr-color-background-selectable-surface-default-hover,
    'active': $cdr-color-background-selectable-surface-default-active,
    'checked': $cdr-color-background-selectable-surface-default-checked,
    'disabled': $cdr-color-background-selectable-surface-default-disabled,
    'loading': $cdr-color-background-selectable-surface-default-loading,
  ),
);
$selectable-surface-border-colors: (
  'default': (
    'rest': $cdr-color-border-selectable-surface-default-rest,
    'hover': $cdr-color-border-selectable-surface-default-hover,
    'active': $cdr-color-border-selectable-surface-default-active,
    'checked': $cdr-color-border-selectable-surface-default-checked,
    'disabled': $cdr-color-border-selectable-surface-default-disabled,
    'loading': $cdr-color-border-selectable-surface-default-loading,
  ),
);

@mixin cdr-selectable-surface-disabled-mixin() {
  &:disabled,
  &:disabled:hover,
  &:disabled:focus {
    @content;
  }
}

@mixin cdr-selectable-surface-hover-mixin() {
  &:hover:not([aria-pressed='true'], [aria-checked='true'], :disabled) {
    @content;
  }
}

@mixin cdr-selectable-surface-active-mixin() {
  &:focus,
  &:active,
  &[aria-pressed='true']:focus,
  &[aria-pressed='true']:active,
  &[aria-checked='true']:focus,
  &[aria-checked='true']:active {
    @content;
  }
}

@mixin cdr-selectable-surface-checked-mixin() {
  &[aria-pressed='true'],
  &[aria-checked='true'] {
    @content;
  }
}

@mixin cdr-selectable-surface-loading-mixin() {
  &[data-loading='true'] {
    @content;
  }
}

@mixin cdr-selectable-surface-base-mixin($component) {
  @include cdr-text-utility-sans-300;
  @include cdr-border-mixin($component);
  @include cdr-border-width-mixin($component, 'sixteenth-x');
  @include cdr-border-style-mixin($component, 'solid');
  @include cdr-radius-mixin($component, 'softest');
  border: none;
  cursor: pointer;
  appearance: none;
  text-align: left;
  text-decoration: none;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  padding: $cdr-space-inset-half-x-stretch;
  transition: all var(--cdr-duration-1-x) var(--cdr-timing-function-ease);

  @include cdr-selectable-surface-loading-mixin() {
    pointer-events: none;

    .cdr-#{$component}__layout {
      opacity: 0;
    }

    .cdr-#{$component}__loading {
      opacity: 1;
    }
  }

  &__inner {
    position: relative;
    height: 100%;
  }

  &__layout {
    opacity: 1;
  }

  &__loading {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    opacity: 0;
    transition: all var(--cdr-duration-1-x) var(--cdr-timing-function-ease);
    pointer-events: none;
  }

  @include cdr-selectable-surface-disabled-mixin() {
    cursor: not-allowed !important;
    @include cdr-border-style-mixin($component, 'dashed');
  }

  @include cdr-selectable-surface-active-mixin() {
    outline: none;
    @include cdr-border-width-mixin($component, 'three-sixteenth-x');
  }

  @include cdr-selectable-surface-checked-mixin() {
    @include cdr-border-width-mixin($component, 'three-sixteenth-x');
  }

  &[aria-pressed='true']:not([role='checkbox']),
  &[aria-checked='true']:not([role='checkbox']) {
    cursor: default;
  }
}

@mixin cdr-selectable-surface-states-mixin(
  $background-colors,
  $border-colors,
  $component,
  $modifier: 'default'
) {
  $state: 'rest';
  @include cdr-background-mixin($background-colors, $component, $modifier, $state);
  @include cdr-border-color-mixin($border-colors, $component, $modifier, $state);

  @include cdr-selectable-surface-hover-mixin() {
    $state: 'hover';
    @include cdr-background-mixin($background-colors, $component, $modifier, $state);
    @include cdr-border-color-mixin($border-colors, $component, $modifier, $state);
  }

  @include cdr-selectable-surface-active-mixin() {
    $state: 'active';
    @include cdr-background-mixin($background-colors, $component, $modifier, $state);
    @include cdr-border-color-mixin($border-colors, $component, $modifier, $state);
  }

  @include cdr-selectable-surface-checked-mixin() {
    $state: 'checked';
    @include cdr-background-mixin($background-colors, $component, $modifier, $state);
    @include cdr-border-color-mixin($border-colors, $component, $modifier, $state);
  }

  @include cdr-selectable-surface-disabled-mixin() {
    $state: 'disabled';
    @include cdr-background-mixin($background-colors, $component, $modifier, $state);
    @include cdr-border-color-mixin($border-colors, $component, $modifier, $state);
  }

  @include cdr-selectable-surface-loading-mixin() {
    $state: 'loading';
    @include cdr-background-mixin($background-colors, $component, $modifier, $state);
  }
}

@mixin cdr-selectable-surface-states-modifiers-mixin(
  $background-colors,
  $border-colors,
  $component,
  $modifiers
) {
  @each $modifier in $modifiers {
    &--modifier-#{$modifier} {
      @include cdr-selectable-surface-states-mixin(
        $background-colors,
        $border-colors,
        $component,
        $modifier
      );
    }
  }
}
